{% load crispy_forms_tags %}
{% load staticfiles %}

<style type="text/css">

#div_id_centro_estudios > div.controls{
  display: table;
}

.ui-dialog{
  z-index: 2050;
}

</style>

<form id='crear_certificacion' role="form" method="POST" class="" action="">
  {% csrf_token %}
  <div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
    <h5 class="modal-title font-bold" id="myModalLabel">A&Ntilde;ADIR CERTIFICACI&Oacute;N</h5>
  </div>
  <div class="modal-body">
    {% if form_seleccionar_certificacion %}
      <div id="form_seleccionar_certificacions">
        <div class="alert alert-info 3x">
          <i class="fa fa-exclamation-triangle"></i> Seleccione una certificacion que no posea. Tambien puede a&ntilde;adir 
            una nueva o ambas cosas.
        </div>   
        {{ form_seleccionar_certificacion|crispy }}
      </div>
      <div class="line pull-in"></div>
    {% endif %}

    <div class="form-group pull-in clearfix">
      <div class="col-sm-4">          
        Fichero
      </div>   
      <div class="col-sm-4">
        {{ form_crear_certificacion.fecha_inicio|as_crispy_field }}
      </div>
      <div class="col-sm-4">          
        {{ form_crear_certificacion.fecha_terminacion|as_crispy_field }}
      </div>      
    </div>    
    <div class="form-group pull-in clearfix">
      <div class="col-sm-12">
        {{ form_crear_certificacion.titulo|as_crispy_field }}
      </div>  
    </div>
    <div class="form-group pull-in clearfix">
      <div class="col-sm-9">
        {{ form_crear_certificacion.profesor|as_crispy_field }}
      </div>
      <div class="col-sm-3">
        {{ form_crear_certificacion.cantidad_horas|as_crispy_field }}
      </div>      
    </div>
    <div class="form-group pull-in clearfix">
      <div class="col-sm-9">
        {{ form_crear_certificacion.centro_estudios|as_crispy_field }}
        <div id="popup"></div>
      </div>
      <div class="col-sm-3">
        {{ form_crear_certificacion.creditos|as_crispy_field }}
      </div>
    </div>
    <div class="form-group pull-in clearfix">
      <div class="col-sm-12">
        {{ form_crear_certificacion.descripcion|as_crispy_field }}
      </div>
    </div>

  </div>

  <div class="modal-footer">
    <button id="boton" type="button" class="btn btn-default" data-dismiss="modal">Cancelar</button>
    <button type="button" class="submit-btn btn btn-primary">A&ntilde;adir</button>
  </div>      
</form>

<script type="text/javascript">

  var call_from_btn;

  $(document).ready(function() {

    $('#div_id_centro_estudios > div.controls').append("<span class='input-group-btn'><button id='btn_crear_centro_de_estudios' class='btn btn-default' type='button'>A&ntilde;adir</button></span>")


    $('#btn_crear_centro_de_estudios').on('click', function(e){
      jQuery(this).removeData('bs.modal');
      jQuery(this).find('.modal-content').empty();

      call_from_btn = true;
      $("#crear_centro_de_estudios").click();      
    });

            
    $("#modal").on('hidden.bs.modal', function(e){
      jQuery(this).removeData('bs.modal');
      jQuery(this).find('.modal-content').empty();

      if(call_from_btn==true){
        $("#crear_certificacion").click();
      }

      call_from_btn = false;

    });


    


  });


</script>


